<%
/** Short helper to convert values to human readable format **/
var MATT_POWER = ['&nbsp;','K','M','G','T','P'];
function mattHumanValue(data,value)
{
	if (data.unit == '%')
	{
		return (100.0*value/data.ref).toFixed(1) + " %";
	} else {
		var power = 0;
		while (value >= 1024)
		{
			power++;
			value /= 1024;
		}

		//return value.toFixed(1) + " " + MATT_POWER[power] + data.unit;
		return Math.round(value) + " " + MATT_POWER[power] + data.unit;
	}
}
%>

<table class='table-func-list'>
	<tr>
		<th>Ratio</th>
		<th>Allocs</th>
		<th>Function</th>
	</tr>
	<% for(var i in data.entries.slice(0,4)) {%>
		<tr>
			<td class='progress'>
				<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: <%= (100.0 * data.entries[i].value) / data.ref %>%;">
					<span class="sr-only">60% Complete</span>
				</div>
			</td>
			<td class='size'><%= mattHumanValue(data,data.entries[i].value) %></td>
			<td class='func'><%= $('<div/>').text(data.entries[i].name).html() %></td>
		</tr>
	<% } %>
</table>