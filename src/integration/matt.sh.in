#!/bin/sh
######################################################
#            PROJECT  : MATT                         #
#            VERSION  : 0.1.0-dev                    #
#            DATE     : 01/2014                      #
#            AUTHOR   : Valat SÃ©bastien              #
#            LICENSE  : CeCILL-C                     #
######################################################

######################################################
mattShowHelp()
{
	echo "Usage : matt [--config=file] [--help] [--] YOUR_COMMAND"
	echo ""
	echo "Options:"
	echo "   -c=file/--config=file   Provide configuration file in INI format."
	echo "   -h/--help               Show this help message."
	echo ""
}

######################################################
#Check args
while true; do
	case "$1" in
		--help|-h)
			mattShowHelp
			exit 0
		;;
		--config=*|-c=*)
			export MATT_CONFIG="`echo "$1" | sed -e 's/^(--config=)|(-c=)//g'`"
			shift 1
		;;
		--)
			shift 1
			break
		;;
		*)
			break
		;;
	esac
done

######################################################
#debug env
# if [ ! -z "$MATT_CONFIG" ]; then echo "MATT_CONFIG=$MATT_CONFIG"; fi

######################################################
#run
LD_PRELOAD=@CMAKE_INSTALL_PREFIX@/lib/libmatt.so "$@"
